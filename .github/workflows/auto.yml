#ğŸ“‚ è·¯å¾„ï¼š.github/workflows/auto.yml

name: Auto Merge IPTV

on: push: paths: - 'valid_my/**' schedule: - cron: '0 2 * * *'  # æ¯å¤© UTC+0 çš„ 2:00ï¼ˆé©¬æ¥è¥¿äºšæ—¶é—´ä¸Šåˆ10ç‚¹ï¼‰

jobs: merge: runs-on: ubuntu-latest

steps:
- name: Checkout
  uses: actions/checkout@v3

- name: Set up Python
  uses: actions/setup-python@v4
  with:
    python-version: '3.10'

- name: Run categorizer
  run: python valid_my/iptv_categorizer.py

- name: Commit & Push
  run: |
    git config --global user.name "github-actions"
    git config --global user.email "github-actions@users.noreply.github.com"
    git add valid_my/iptv_all.m3u
    git diff --cached --quiet || git commit -m "Auto: Update iptv_all.m3u"
    git push
